<!DOCTYPE html>
<html lang="pt-BR">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Pedido Online - Lanchonete</title>
ย ย <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
ย ย <link rel="stylesheet" href="style.css">
</head>
<body>

ย ย <div class="main-content">
ย ย ย ย <h1>JORGIN LANCHES</h1>
ย ย 
ย ย ย ย <form id="formPedido" action="processa_pedido.php" method="POST" enctype="application/x-www-form-urlencoded">

ย ย ย ย ย ย <fieldset class="form-group">
ย ย ย ย ย ย ย ย <legend>Dados do Cliente</legend>
ย ย ย ย ย ย ย ย <label for="nome">Nome Completo:</label>
ย ย ย ย ย ย ย ย <input type="text" id="nome" name="nome" placeholder="Digite seu nome completo" required>

ย ย ย ย ย ย ย ย <label for="telefone">Telefone:</label>
ย ย ย ย ย ย ย ย <input type="tel" id="telefone" name="telefone" placeholder="(21) 99999-9999" 
ย ย ย ย ย ย ย ย ย ย ย ยpattern="\(\d{2}\)\s\d{5}-\d{4}" title="Formato: (21) 99999-9999" required>
ย ย ย ย ย ย </fieldset>

ย ย ย ย ย ย <fieldset class="form-group">
ย ย ย ย ย ย ย ย <legend>Endereรงo de Entrega</legend>
ย ย ย ย ย ย ย ย <label for="cep">CEP:</label>
ย ย ย ย ย ย ย ย <div class="input-com-botao">
ย ย ย ย ย ย ย ย ย ย <input type="text" id="cep" name="cep" placeholder="Digite seu CEP" maxlength="8" required>
ย ย ย ย ย ย ย ย ย ย <button type="button" class="btn-cep" onclick="buscarCEP()">Buscar</button>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย <label for="endereco">Endereรงo:</label>
ย ย ย ย ย ย ย ย <input type="text" id="endereco" name="endereco" placeholder="Rua, bairro, cidade" required>

ย ย ย ย ย ย ย ย <label for="numero">Nยบ Residรชncia:</label>
ย ย ย ย ย ย ย ย <input type="number" id="numero" name="numero" placeholder="999" required>

ย ย ย ย ย ย ย ย <label for="complemento">Complemento:</label>
ย ย ย ย ย ย ย ย <input type="text" id="complemento" name="complemento" placeholder="Ex: Lote 2, Apto 101">
ย ย ย ย ย ย </fieldset>

ย ย ย ย ย ย <fieldset class="form-group">
ย ย ย ย ย ย ย ย <legend>Adicionar Itens ao Pedido</legend>

ย ย ย ย ย ย ย ย <label for="produto">Produto:</label>
ย ย ย ย ย ย ย ย <select id="produto">
ย ย ย ย ย ย ย ย ย ย <option value="" disabled selected>Selecione um item</option>
ย ย ย ย ย ย ย ย ย ย <option value="Pizza">๐ Pizza</option>
ย ย ย ย ย ย ย ย ย ย <option value="Hamburguer">๐ Hambรบrguer</option>
ย ย ย ย ย ย ย ย ย ย <option value="Pastel Tradicional">๐ฅ Pastel Tradicional</option>
ย ย ย ย ย ย ย ย ย ย <option value="Pastel Tudo Dentro">๐ฅ Pastel "Com Tudo Dentro"</option>
ย ย ย ย ย ย ย ย ย ย <option value="Refrigerante">๐ฅค Refrigerante</option>
ย ย ย ย ย ย ย ย ย ย <option value="Guaracamp">๐ฅค Guaracamp</option>
ย ย ย ย ย ย ย ย </select>

ย ย ย ย ย ย ย ย <div id="opcoesPizza" class="item-opcoes" style="display:none;">
ย ย ย ย ย ย ย ย ย ย <h4>Ingredientes base: <span class="ingredientes-base">Massa, Molho de tomate, Mussarela</span></h4>
ย ย ย ย ย ย ย ย ย ย <div class="sabor-selection">
ย ย ย ย ย ย ย ย ย ย ย ย <label>Selecione 1ยบ Sabor:</label>
ย ย ย ย ย ย ย ย ย ย ย ย <select id="saborPizza1"></select>
ย ย ย ย ย ย ย ย ย ย ย ย <label>Selecione 2ยบ Sabor (opcional):</label>
ย ย ย ย ย ย ย ย ย ย ย ย <select id="saborPizza2"></select>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย <div id="opcoesHamburguer" class="item-opcoes" style="display:none;">
ย ย ย ย ย ย ย ย ย ย <label>Ingredientes:</label>
ย ย ย ย ย ย ย ย ย ย <div id="ingredientesHamburguer" class="checkbox-group"></div>
ย ย ย ย ย ย ย ย ย ย <label>Molhos:</label>
ย ย ย ย ย ย ย ย ย ย <div id="molhosHamburguer" class="checkbox-group"></div>
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย <div id="opcoesPastel" class="item-opcoes" style="display:none;">
ย ย ย ย ย ย ย ย ย ย <div id="pastelTradicional" style="display:none;">
ย ย ย ย ย ย ย ย ย ย ย ย <label>Sabor (Escolha 1):</label>
ย ย ย ย ย ย ย ย ย ย ย ย <div id="saboresPastelTradicional" class="radio-group"></div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div id="pastelTudoDentro" style="display:none;">
ย ย ย ย ย ย ย ย ย ย ย ย <label>Ingredientes (atรฉ 10):</label>
ย ย ย ย ย ย ย ย ย ย ย ย <div id="ingredientesPastel" class="checkbox-group"></div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย <div id="opcoesRefrigerante" class="item-opcoes" style="display:none;">
ย ย ย ย ย ย ย ย ย ย <label for="tamanhoRefri">Tamanho:</label>
ย ย ย ย ย ย ย ย ย ย <select id="tamanhoRefri"></select>
ย ย ย ย ย ย ย ย ย ย <label for="saborRefri">Sabor:</label>
ย ย ย ย ย ย ย ย ย ย <select id="saborRefri"></select>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย <div id="opcoesGuaracamp" class="item-opcoes" style="display:none;">
ย ย ย ย ย ย ย ย ย ย <label>Este produto nรฃo tem opรงรตes de personalizaรงรฃo.</label>
ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย <label for="quantidade">Quantidade:</label>
ย ย ย ย ย ย ย ย <input type="number" id="quantidade" min="1" value="1">

ย ย ย ย ย ย ย ย <button type="button" class="btn-adicionar" onclick="adicionarItem()">Adicionar ao Pedido</button>

ย ย ย ย ย ย ย ย <h3>Carrinho de Compras</h3>
ย ย ย ย ย ย ย ย <div class="table-responsive">
ย ย ย ย ย ย ย ย ย ย <table id="tabelaCarrinho" class="table-hover">
ย ย ย ย ย ย ย ย ย ย ย ย <thead>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <tr>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <th>Produto</th>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <th>Descriรงรฃo</th>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <th>Qtd.</th>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <th>Preรงo Unit.</th>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <th>Total</th>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <th>Aรงรตes</th>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </tr>
ย ย ย ย ย ย ย ย ย ย </thead>
ย ย ย ย ย ย ย ย ย ย <tbody></tbody>
ย ย ย ย ย ย ย ย </table>
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <div id="itensOcultos"></div>
ย ย ย ย </fieldset>

ย ย ย ย <fieldset class="form-group">
ย ย ย ย ย ย <legend>Detalhes Adicionais</legend>
ย ย ย ย ย ย <label for="observacoes">Observaรงรตes:</label>
ย ย ย ย ย ย <textarea id="observacoes" name="observacoes" placeholder="Ex: Sem cebola, cortar em 8 pedaรงos..."></textarea>
ย ย ย ย </fieldset>

ย ย ย ย <fieldset class="form-group">
ย ย ย ย ย ย <legend>Pagamento</legend>
ย ย ย ย ย ย <label>Forma de pagamento:</label>
ย ย ย ย ย ย <div class="radio-group">
ย ย ย ย ย ย ย ย <label><input type="radio" name="pagamento" value="VR" required> VR</label>
ย ย ย ย ย ย ย ย <label><input type="radio" name="pagamento" value="Dรฉbito"> Dรฉbito</label>
ย ย ย ย ย ย ย ย <label><input type="radio" name="pagamento" value="Crรฉdito"> Crรฉdito</label>
ย ย ย ย ย ย ย ย <label><input type="radio" name="pagamento" value="Pix"> Pix</label>
ย ย ย ย ย ย </div>
ย ย ย ย ย ย 
ย ย ย ย ย ย <label>Tipo de pagamento:</label>
ย ย ย ย ย ย <div class="radio-group">
ย ย ย ย ย ย ย ย <label><input type="radio" name="tipo_pagamento" value="Online" required> Online</label>
ย ย ย ย ย ย ย ย <label><input type="radio" name="tipo_pagamento" value="Na Entrega"> Na Entrega</label>
ย ย ย ย ย ย </div>
ย ย ย ย </fieldset>

ย ย ย ย <div class="botoes-form">
ย ย ย ย ย ย <button type="submit" class="btn-submit animate-btn">Enviar Pedido</button>
ย ย ย ย ย ย <button type="reset" class="btn-reset animate-btn">Limpar Formulรกrio</button>
ย ย ย ย </div>
ย ย </form>
ย ย </div>

ย ย <script>
ย ย ย ย document.addEventListener("DOMContentLoaded", () => {
ย ย ย ย ย ย const carrinho = [];
ย ย ย ย ย ย 
ย ย ย ย ย ย // Dados dos produtos
ย ย ย ย ย ย const produtos = {
ย ย ย ย ย ย ย ย "Pizza": {
ย ย ย ย ย ย ย ย ย ย sabores: {
ย ย ย ย ย ย ย ย ย ย ย ย "Calabresa": {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย nome: "Calabresa",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ingredientes: "linguiรงa calabresa fatiada, cebola e azeitonas"
ย ย ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย ย ย "Frango com Catupiry": {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย nome: "Frango com Catupiry",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ingredientes: "frango desfiado e temperado com catupiry cremoso"
ย ย ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย ย ย "Portuguesa": {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย nome: "Portuguesa",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ingredientes: "presunto, ovo cozido, cebola, azeitona e pimentรฃo"
ย ย ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย ย ย "Quatro Queijos": {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย nome: "Quatro Queijos",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ingredientes: "gorgonzola, parmesรฃo, provolone e mussarela"
ย ย ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย ย ย "Marguerita": {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย nome: "Marguerita",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ingredientes: "rodelas de tomate e manjericรฃo fresco"
ย ย ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย ย ย "Bacon": {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย nome: "Bacon",
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ingredientes: "bacon crocante e milho"
ย ย ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย ingredientesBase: "Massa, Molho de tomate da casa, Mussarela"
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย "Hamburguer": {
ย ย ย ย ย ย ย ย ย ย ingredientes: ["Pรฃo", "Carne", "Queijo", "Alface", "Tomate", "Bacon", "Cebola Roxa"],
ย ย ย ย ย ย ย ย ย ย molhos: ["Ketchup", "Maionese", "Mostarda", "Barbecue", "Maionese Verde", "Billy Jack"]
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย "Pastel Tradicional": {
ย ย ย ย ย ย ย ย ย ย sabores: ["Queijo", "Carne", "Frango", "Calabresa", "Palmito", "Chocolate"]
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย "Pastel Tudo Dentro": {
ย ย ย ย ย ย ย ย ย ย ingredientes: ["Carne", "Queijo", "Frango", "Calabresa", "Palmito", "Ovo", "Milho", "Azeitona", "Catupiry", "Bacon", "Cebola"]
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย "Refrigerante": {
ย ย ย ย ย ย ย ย ย ย tamanhos: ["Lata 350ml", "1L", "2L"],
ย ย ย ย ย ย ย ย ย ย sabores: ["Coca-Cola", "Guaranรก", "Fanta Laranja", "Sprite"]
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย "Guaracamp": {}
ย ย ย ย ย ย };

ย ย ย ย ย ย // Preรงos
ย ย ย ย ย ย const precos = {
ย ย ย ย ย ย ย ย "Pizza": () => (Math.random() * 30 + 20).toFixed(2), 
ย ย ย ย ย ย ย ย "Hamburguer": () => (Math.random() * 15 + 10).toFixed(2), 
ย ย ย ย ย ย ย ย "Pastel Tradicional": () => (Math.random() * 8 + 5).toFixed(2), 
ย ย ย ย ย ย ย ย "Pastel Tudo Dentro": () => (Math.random() * 12 + 8).toFixed(2), 
ย ย ย ย ย ย ย ย "Refrigerante": (tamanho) => {
ย ย ย ย ย ย ย ย ย ย if (tamanho === "Lata 350ml") return (Math.random() * 3 + 4).toFixed(2);
ย ย ย ย ย ย ย ย ย ย if (tamanho === "1L") return (Math.random() * 4 + 6).toFixed(2);
ย ย ย ย ย ย ย ย ย ย if (tamanho === "2L") return (Math.random() * 5 + 8).toFixed(2);
ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย "Guaracamp": () => (Math.random() * 2 + 2).toFixed(2)
ย ย ย ย ย ย };

ย ย ย ย ย ย // Referรชncias de elementos
ย ย ย ย ย ย const produtoSelect = document.getElementById("produto");
ย ย ย ย ย ย const opcoes = {
ย ย ย ย ย ย ย ย pizza: document.getElementById("opcoesPizza"),
ย ย ย ย ย ย ย ย hamburguer: document.getElementById("opcoesHamburguer"),
ย ย ย ย ย ย ย ย pastel: document.getElementById("opcoesPastel"),
ย ย ย ย ย ย ย ย refrigerante: document.getElementById("opcoesRefrigerante"),
ย ย ย ย ย ย ย ย guaracamp: document.getElementById("opcoesGuaracamp")
ย ย ย ย ย ย };
ย ย ย ย ย ย const listaIngredientesHamburguer = document.getElementById("ingredientesHamburguer");
ย ย ย ย ย ย const listaMolhosHamburguer = document.getElementById("molhosHamburguer");
ย ย ย ย ย ย const listaSaboresPastelTradicional = document.getElementById("saboresPastelTradicional");
ย ย ย ย ย ย const listaIngredientesPastel = document.getElementById("ingredientesPastel");
ย ย ย ย ย ย const saborPizza1 = document.getElementById("saborPizza1");
ย ย ย ย ย ย const saborPizza2 = document.getElementById("saborPizza2");
ย ย ย ย ย ย const tamanhoRefri = document.getElementById("tamanhoRefri");
ย ย ย ย ย ย const saborRefri = document.getElementById("saborRefri");
ย ย ย ย ย ย const quantidadeInput = document.getElementById("quantidade");
ย ย ย ย ย ย const tabelaCarrinho = document.getElementById("tabelaCarrinho");
ย ย ย ย ย ย const itensOcultos = document.getElementById("itensOcultos");
ย ย ย ย ย ย const formPedido = document.getElementById("formPedido");

ย ย ย ย ย ย // Popula os campos dinรขmicos
ย ย ย ย ย ย const popularSelect = (select, options) => {
ย ย ย ย ย ย ย ย select.innerHTML = '<option value="" disabled selected>Selecione</option>';
ย ย ย ย ย ย ย ย options.forEach(option => {
ย ย ย ย ย ย ย ย ย ย const opt = document.createElement("option");
ย ย ย ย ย ย ย ย ย ย opt.value = opt.textContent = option.nome || option;
ย ย ย ย ย ย ย ย ย ย opt.setAttribute('data-ingredientes', option.ingredientes || '');
ย ย ย ย ย ย ย ย ย ย select.appendChild(opt);
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย };

ย ย ย ย ย ย const popularCheckboxes = (div, options, max) => {
ย ย ย ย ย ย ย ย div.innerHTML = "";
ย ย ย ย ย ย ย ย options.forEach(option => {
ย ย ย ย ย ย ย ย ย ย div.innerHTML += `<label><input type="checkbox" value="${option}"> ${option}</label>`;
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย if (max) {
ย ย ย ย ย ย ย ย ย ย const checkboxes = div.querySelectorAll('input[type="checkbox"]');
ย ย ย ย ย ย ย ย ย ย checkboxes.forEach(cb => {
ย ย ย ย ย ย ย ย ย ย ย ย cb.addEventListener('change', () => {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย const selecionados = div.querySelectorAll('input[type="checkbox"]:checked').length;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย if (selecionados > max) {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย cb.checked = false;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย alert(`Vocรช pode selecionar no mรกximo ${max} ingredientes.`);
ย ย ย ย ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย };
ย ย ย ย ย ย 
ย ย ย ย ย ย const popularRadios = (div, options) => {
ย ย ย ย ย ย ย ย div.innerHTML = "";
ย ย ย ย ย ย ย ย options.forEach(option => {
ย ย ย ย ย ย ย ย ย ย div.innerHTML += `<label><input type="radio" name="saborPastelTrad" value="${option}"> ${option}</label>`;
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย };

ย ย ย ย ย ย // Event listener para o select de produto
ย ย ย ย ย ย produtoSelect.addEventListener("change", (event) => {
ย ย ย ย ย ย ย ย const produto = event.target.value;
ย ย ย ย ย ย ย ย Object.values(opcoes).forEach(op => op.style.display = "none");
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย if (produto.startsWith("Pastel")) {
ย ย ย ย ย ย ย ย ย ย opcoes.pastel.style.display = "block";
ย ย ย ย ย ย ย ย ย ย document.getElementById("pastelTradicional").style.display = produto === "Pastel Tradicional" ? "block" : "none";
ย ย ย ย ย ย ย ย ย ย document.getElementById("pastelTudoDentro").style.display = produto === "Pastel Tudo Dentro" ? "block" : "none";
ย ย ย ย ย ย ย ย } else if (opcoes[produto.toLowerCase()]) {
ย ย ย ย ย ย ย ย ย ย opcoes[produto.toLowerCase()].style.display = "block";
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย switch(produto) {
ย ย ย ย ย ย ย ย ย ย case "Pizza":
ย ย ย ย ย ย ย ย ย ย ย ย popularSelect(saborPizza1, Object.values(produtos.Pizza.sabores));
ย ย ย ย ย ย ย ย ย ย ย ย popularSelect(saborPizza2, Object.values(produtos.Pizza.sabores));
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Hamburguer":
ย ย ย ย ย ย ย ย ย ย ย ย popularCheckboxes(listaIngredientesHamburguer, produtos.Hamburguer.ingredientes);
ย ย ย ย ย ย ย ย ย ย ย ย popularCheckboxes(listaMolhosHamburguer, produtos.Hamburguer.molhos);
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Pastel Tradicional":
ย ย ย ย ย ย ย ย ย ย ย ย popularRadios(listaSaboresPastelTradicional, produtos["Pastel Tradicional"].sabores);
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Pastel Tudo Dentro":
ย ย ย ย ย ย ย ย ย ย ย ย popularCheckboxes(listaIngredientesPastel, produtos["Pastel Tudo Dentro"].ingredientes, 10);
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Refrigerante":
ย ย ย ย ย ย ย ย ย ย ย ย popularSelect(tamanhoRefri, produtos.Refrigerante.tamanhos);
ย ย ย ย ย ย ย ย ย ย ย ย popularSelect(saborRefri, produtos.Refrigerante.sabores);
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Guaracamp":
ย ย ย ย ย ย ย ย ย ย ย ย popularSelect(tamanhoRefri, []); // Guaracamp nรฃo tem opรงรตes de tamanho
ย ย ย ย ย ย ย ย ย ย ย ย popularSelect(saborRefri, []); // nem de sabor
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย });

ย ย ย ย ย ย // Adicionar item ao carrinho
ย ย ย ย ย ย window.adicionarItem = () => {
ย ย ย ย ย ย ย ย const produto = produtoSelect.value;
ย ย ย ย ย ย ย ย const quantidade = parseInt(quantidadeInput.value);
ย ย ย ย ย ย ย ย let descricao = "";
ย ย ย ย ย ย ย ย let precoUnit = 0;

ย ย ย ย ย ย ย ย if (!produto || quantidade < 1) {
ย ย ย ย ย ย ย ย ย ย alert("Por favor, selecione um produto e a quantidade.");
ย ย ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย switch(produto) {
ย ย ย ย ย ย ย ย ย ย case "Pizza":
ย ย ย ย ย ย ย ย ย ย ย ย const sabor1 = saborPizza1.value;
ย ย ย ย ย ย ย ย ย ย ย ย const sabor2 = saborPizza2.value;
ย ย ย ย ย ย ย ย ย ย ย ย if (!sabor1) { alert("Selecione pelo menos um sabor para a pizza."); return; }
ย ย ย ย ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย ย ย ย ย const ingredientesSabor1 = produtos.Pizza.sabores[sabor1].ingredientes;
ย ย ย ย ย ย ย ย ย ย ย ย const ingredientesSabor2 = sabor2 ? produtos.Pizza.sabores[sabor2].ingredientes : null;
ย ย ย ย ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย ย ย ย ย descricao = `${produtos.Pizza.ingredientesBase} - Sabores: ${sabor1} (${ingredientesSabor1})` + (sabor2 ? ` e ${sabor2} (${ingredientesSabor2})` : "");
ย ย ย ย ย ย ย ย ย ย ย ย precoUnit = parseFloat(precos.Pizza());
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Hamburguer":
ย ย ย ย ย ย ย ย ย ย ย ย const ingredientesSelecionados = Array.from(listaIngredientesHamburguer.querySelectorAll('input:checked')).map(cb => cb.value);
ย ย ย ย ย ย ย ย ย ย ย ย const molhosSelecionados = Array.from(listaMolhosHamburguer.querySelectorAll('input:checked')).map(cb => cb.value);
ย ย ย ย ย ย ย ย ย ย ย ย if (ingredientesSelecionados.length === 0) { alert("Selecione pelo menos um ingrediente para o hambรบrguer."); return; }
ย ย ย ย ย ย ย ย ย ย ย ย descricao = `Ingredientes: ${ingredientesSelecionados.join(", ")}` + (molhosSelecionados.length > 0 ? ` - Molhos: ${molhosSelecionados.join(", ")}` : "");
ย ย ย ย ย ย ย ย ย ย ย ย precoUnit = parseFloat(precos.Hamburguer());
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Pastel Tradicional":
ย ย ย ย ย ย ย ย ย ย ย ย const saborPastelTrad = document.querySelector('input[name="saborPastelTrad"]:checked');
ย ย ย ย ย ย ย ย ย ย ย ย if (!saborPastelTrad) { alert("Selecione um sabor para o pastel tradicional."); return; }
ย ย ย ย ย ย ย ย ย ย ย ย descricao = saborPastelTrad.value;
ย ย ย ย ย ย ย ย ย ย ย ย precoUnit = parseFloat(precos["Pastel Tradicional"]());
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Pastel Tudo Dentro":
ย ย ย ย ย ย ย ย ย ย ย ย const ingredientesPastel = Array.from(listaIngredientesPastel.querySelectorAll('input:checked')).map(cb => cb.value);
ย ย ย ย ย ย ย ย ย ย ย ย if (ingredientesPastel.length === 0) { alert("Selecione pelo menos um ingrediente para o pastel."); return; }
ย ย ย ย ย ย ย ย ย ย ย ย descricao = "Pastel " + ingredientesPastel.join(", ");
ย ย ย ย ย ย ย ย ย ย ย ย precoUnit = parseFloat(precos["Pastel Tudo Dentro"]());
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Refrigerante":
ย ย ย ย ย ย ย ย ย ย ย ย const tamanho = tamanhoRefri.value;
ย ย ย ย ย ย ย ย ย ย ย ย const sabor = saborRefri.value;
ย ย ย ย ย ย ย ย ย ย ย ย if (!tamanho || !sabor) { alert("Selecione o tamanho e o sabor do refrigerante."); return; }
ย ย ย ย ย ย ย ย ย ย ย ย descricao = `${sabor} (${tamanho})`;
ย ย ย ย ย ย ย ย ย ย ย ย precoUnit = parseFloat(precos.Refrigerante(tamanho));
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย case "Guaracamp":
ย ย ย ย ย ย ย ย ย ย ย ย descricao = "Guaracamp";
ย ย ย ย ย ย ย ย ย ย ย ย precoUnit = parseFloat(precos.Guaracamp());
ย ย ย ย ย ย ย ย ย ย ย ย break;
ย ย ย ย ย ย ย ย ย ย default:
ย ย ย ย ย ย ย ย ย ย ย ย alert("Produto nรฃo selecionado ou invรกlido.");
ย ย ย ย ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย const total = (precoUnit * quantidade).toFixed(2);
ย ย ย ย ย ย ย ย carrinho.push({produto, descricao, quantidade, precoUnit, total});
ย ย ย ย ย ย ย ย atualizarCarrinho();
ย ย ย ย ย ย ย ย limparCamposItem();
ย ย ย ย ย ย }

ย ย ย ย ย ย window.removerItem = (index) => {
ย ย ย ย ย ย ย ย carrinho.splice(index, 1);
ย ย ย ย ย ย ย ย atualizarCarrinho();
ย ย ย ย ย ย }

ย ย ย ย ย ย const atualizarCarrinho = () => {
ย ย ย ย ย ย ย ย const tbody = tabelaCarrinho.querySelector("tbody");
ย ย ย ย ย ย ย ย tbody.innerHTML = "";
ย ย ย ย ย ย ย ย itensOcultos.innerHTML = "";

ย ย ย ย ย ย ย ย carrinho.forEach((item, index) => {
ย ย ย ย ย ย ย ย ย ย const tr = document.createElement("tr");
ย ย ย ย ย ย ย ย ย ย tr.innerHTML = `
ย ย ย ย ย ย ย ย ย ย ย ย <td>${item.produto}</td>
ย ย ย ย ย ย ย ย ย ย ย ย <td>${item.descricao}</td>
ย ย ย ย ย ย ย ย ย ย ย ย <td>${item.quantidade}</td>
ย ย ย ย ย ย ย ย ย ย ย ย <td>R$ ${item.precoUnit}</td>
ย ย ย ย ย ย ย ย ย ย ย ย <td>R$ ${item.total}</td>
ย ย ย ย ย ย ย ย ย ย ย ย <td><button type="button" class="btn-remover" onclick="removerItem(${index})">Remover</button></td>
ย ย ย ย ย ย ย ย ย ย `;
ย ย ย ย ย ย ย ย ย ย tbody.appendChild(tr);

ย ย ย ย ย ย ย ย ย ย for(const key in item){
ย ย ย ย ย ย ย ย ย ย ย ย const input = document.createElement("input");
ย ย ย ย ย ย ย ย ย ย ย ย input.type = "hidden";
ย ย ย ย ย ย ย ย ย ย ย ย input.name = `itens[${index}][${key}]`;
ย ย ย ย ย ย ย ย ย ย ย ย input.value = item[key];
ย ย ย ย ย ย ย ย ย ย ย ย itensOcultos.appendChild(input);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย }

ย ย ย ย ย ย const limparCamposItem = () => {
ย ย ย ย ย ย ย ย produtoSelect.selectedIndex = 0;
ย ย ย ย ย ย ย ย Object.values(opcoes).forEach(op => op.style.display = "none");
ย ย ย ย ย ย ย ย quantidadeInput.value = 1;
ย ย ย ย ย ย }

ย ย ย ย ย ย window.buscarCEP = async () => {
ย ย ย ย ย ย ย ย const cep = document.getElementById("cep").value.replace(/\D/g, "");
ย ย ย ย ย ย ย ย if (cep.length !== 8) {
ย ย ย ย ย ย ย ย ย ย alert("Digite um CEP vรกlido com 8 nรบmeros.");
ย ย ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย const enderecoInput = document.getElementById("endereco");
ย ย ย ย ย ย ย ย enderecoInput.value = "Buscando...";

ย ย ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย ย ย const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
ย ย ย ย ย ย ย ย ย ย const data = await response.json();

ย ย ย ย ย ย ย ย ย ย if (data.erro) {
ย ย ย ย ย ย ย ย ย ย ย ย enderecoInput.value = "";
ย ย ย ย ย ย ย ย ย ย ย ย alert("CEP nรฃo encontrado.");
ย ย ย ย ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย enderecoInput.value = `${data.logradouro}, ${data.bairro}, ${data.localidade} - ${data.uf}`;
ย ย ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย ย ย enderecoInput.value = "";
ย ย ย ย ย ย ย ย ย ย alert("Erro ao buscar o CEP. Tente novamente.");
ย ย ย ย ย ย ย ย ย ย console.error(error);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }

ย ย ย ย ย ย formPedido.addEventListener('submit', (event) => {
ย ย ย ย ย ย ย ย if (carrinho.length === 0) {
ย ย ย ย ย ย ย ย ย ย event.preventDefault();
ย ย ย ย ย ย ย ย ย ย alert("O seu carrinho de compras estรก vazio. Por favor, adicione um item antes de enviar o pedido.");
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย });

ย ย ย ย });
ย ย </script>

</body>
</html>